apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: bookinfo
  namespace: bookinfo
spec:
  parentRefs:
    - name: bookinfo-gateway
  rules:
    - matches:
        - path: { type: PathPrefix, value: /productpage }
        - path: { type: PathPrefix, value: /static }
        - path: { type: PathPrefix, value: /login }
        - path: { type: PathPrefix, value: /logout }
        - path: { type: PathPrefix, value: /api/v1/products }
      backendRefs:
        - name: productpage
          port: 9080
    - matches:
        - path: { type: PathPrefix, value: /details }
      backendRefs:
        - name: details
          port: 9080
    - matches:
        - path: { type: PathPrefix, value: /reviews }
      backendRefs:
        - name: reviews
          port: 9080
    - matches:
        - path: { type: PathPrefix, value: /ratings }
      backendRefs:
        - name: ratings
          port: 9080

